/*!
 * term-web.js v1.1.9
 * Github: https://github.com/zhw2590582/term-web#readme
 * (c) 2017-2021 Harvey Zack
 * Released under the MIT License.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Term=e()}(this,function(){"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var o=t(e(function(t){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},t.exports.default=t.exports,t.exports.__esModule=!0})),G=t(e(function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0})),s=t(e(function(t){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t},t.exports.default=t.exports,t.exports.__esModule=!0})),r=e(function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0}),c=t(r),a=e(function(i){function n(t,e){return i.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i.exports.default=i.exports,i.exports.__esModule=!0,n(t,e)}i.exports=n,i.exports.default=i.exports,i.exports.__esModule=!0});t(a);var u=t(e(function(t){t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0})),h=e(function(e){function i(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=i=function(t){return typeof t}:e.exports=i=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e.exports.default=e.exports,e.exports.__esModule=!0,i(t)}e.exports=i,e.exports.default=e.exports,e.exports.__esModule=!0});t(h);var l=t(e(function(t){var i=h.default;t.exports=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?r(t):e},t.exports.default=t.exports,t.exports.__esModule=!0})),d=e(function(e){function i(t){return e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e.exports.default=e.exports,e.exports.__esModule=!0,i(t)}e.exports=i,e.exports.default=e.exports,e.exports.__esModule=!0}),p=t(d);var i,f,g,m;i=".term-container{position:relative;user-select:none;overflow:hidden;border-radius:5px;box-shadow:0 20px 68px rgba(0,0,0,.55);scrollbar-color:#666 transparent!important;scrollbar-width:thin!important}.term-container ::-webkit-scrollbar{width:5px}.term-container ::-webkit-scrollbar-thumb{background-color:#666;border-radius:5px}.term-container ::-webkit-scrollbar-thumb:hover{background-color:#ccc}.term-container.is-dragging{opacity:.95}.term-container.is-fullscreen{position:fixed!important;z-index:9999!important;top:0!important;left:0!important;bottom:0!important;right:0!important;width:100%!important;height:100%!important}.term-container .term-canvas{position:absolute;z-index:1;top:0;left:0;bottom:0;right:0;width:100%;height:100%}.term-container .term-textarea{z-index:2}.term-container .term-copy,.term-container .term-textarea{position:absolute;width:20px;height:20px;opacity:0;pointer-events:none;resize:none}.term-container .term-copy{z-index:3}.term-container .term-header{position:absolute;z-index:4;width:100%;top:0;left:0;right:0}.term-container .term-header .term-recorder{position:absolute;right:10px;top:10px;height:18px;width:18px;border-radius:3px;cursor:pointer;border-style:solid;border-width:0;background:#f44336;transition:all .2s ease}@keyframes loop{0%{border-width:1px}50%{border-width:6px}to{border-width:1px}}.term-container .term-header .term-recorder.recording{background:#ff5722;border-color:rgba(255,254,254,.5);border-radius:50%;animation:loop 1s linear infinite}.term-container .term-header .term-recorder.creating{background:#009688;border-color:rgba(255,254,254,.5);border-radius:50%;animation:loop 1s linear infinite}.term-container .term-content{position:absolute;z-index:5;width:100%;right:0;left:0;overflow:auto}.term-container .term-content:hover{cursor:text}.term-container .term-footer{position:absolute;z-index:6;width:100%;bottom:0;left:0;right:0}.term-container .term-footer .term-resize{position:absolute;right:0;bottom:0;width:20px;height:20px;cursor:nwse-resize}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsZ0JBQ0UsaUJBQWtCLENBQ2xCLGdCQUFpQixDQUNqQixlQUFnQixDQUNoQixpQkFBa0IsQ0FDbEIsc0NBQTZDLENBQzdDLDBDQUE0QyxDQUM1Qyw4QkFBa0MsQ0FDbEMsb0NBQ0UsU0FBWSxDQUNkLDBDQUNFLHFCQUFzQixDQUN0QixpQkFBb0IsQ0FDdEIsZ0RBQ0UscUJBQXdCLENBQzFCLDRCQUNFLFdBQWUsQ0FDakIsOEJBQ0Usd0JBQTBCLENBQzFCLHNCQUF3QixDQUN4QixlQUFpQixDQUNqQixnQkFBa0IsQ0FDbEIsa0JBQW9CLENBQ3BCLGlCQUFtQixDQUNuQixvQkFBc0IsQ0FDdEIscUJBQXlCLENBQzNCLDZCQUNFLGlCQUFrQixDQUNsQixTQUFVLENBQ1YsS0FBTSxDQUNOLE1BQU8sQ0FDUCxRQUFTLENBQ1QsT0FBUSxDQUNSLFVBQVcsQ0FDWCxXQUFjLENBQ2hCLCtCQUVFLFNBS2MsQ0FDaEIsMERBUEUsaUJBQWtCLENBRWxCLFVBQVcsQ0FDWCxXQUFZLENBQ1osU0FBVSxDQUNWLG1CQUFvQixDQUNwQixXQVFjLENBUGhCLDJCQUVFLFNBS2MsQ0FDaEIsNkJBQ0UsaUJBQWtCLENBQ2xCLFNBQVUsQ0FDVixVQUFXLENBQ1gsS0FBTSxDQUNOLE1BQU8sQ0FDUCxPQUFVLENBQ1YsNENBQ0UsaUJBQWtCLENBQ2xCLFVBQVcsQ0FDWCxRQUFTLENBQ1QsV0FBWSxDQUNaLFVBQVcsQ0FDWCxpQkFBa0IsQ0FDbEIsY0FBZSxDQUNmLGtCQUFtQixDQUNuQixjQUFlLENBQ2Ysa0JBQW1CLENBQ25CLHVCQUEyQixDQUVqQyxnQkFDRSxHQUNFLGdCQUFtQixDQUNyQixJQUNFLGdCQUFtQixDQUNyQixHQUNFLGdCQUFtQixDQUFFLENBQ25CLHNEQUNFLGtCQUFtQixDQUNuQixpQ0FBc0MsQ0FDdEMsaUJBQWtCLENBQ2xCLGlDQUFvQyxDQUN0QyxxREFDRSxrQkFBbUIsQ0FDbkIsaUNBQXNDLENBQ3RDLGlCQUFrQixDQUNsQixpQ0FBb0MsQ0FDMUMsOEJBQ0UsaUJBQWtCLENBQ2xCLFNBQVUsQ0FDVixVQUFXLENBQ1gsT0FBUSxDQUNSLE1BQU8sQ0FDUCxhQUFnQixDQUNoQixvQ0FDRSxXQUFjLENBQ2xCLDZCQUNFLGlCQUFrQixDQUNsQixTQUFVLENBQ1YsVUFBVyxDQUNYLFFBQVMsQ0FDVCxNQUFPLENBQ1AsT0FBVSxDQUNWLDBDQUNFLGlCQUFrQixDQUNsQixPQUFRLENBQ1IsUUFBUyxDQUNULFVBQVcsQ0FDWCxXQUFZLENBQ1osa0JBQXFCIiwiZmlsZSI6ImluZGV4LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGVybS1jb250YWluZXIge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHVzZXItc2VsZWN0OiBub25lO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIGJveC1zaGFkb3c6IHJnYmEoMCwgMCwgMCwgMC41NSkgMHB4IDIwcHggNjhweDtcbiAgc2Nyb2xsYmFyLWNvbG9yOiAjNjY2IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XG4gIHNjcm9sbGJhci13aWR0aDogdGhpbiAhaW1wb3J0YW50OyB9XG4gIC50ZXJtLWNvbnRhaW5lciA6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICB3aWR0aDogNXB4OyB9XG4gIC50ZXJtLWNvbnRhaW5lciA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjY2O1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDsgfVxuICAudGVybS1jb250YWluZXIgOjotd2Via2l0LXNjcm9sbGJhci10aHVtYjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2NjYzsgfVxuICAudGVybS1jb250YWluZXIuaXMtZHJhZ2dpbmcge1xuICAgIG9wYWNpdHk6IDAuOTU7IH1cbiAgLnRlcm0tY29udGFpbmVyLmlzLWZ1bGxzY3JlZW4ge1xuICAgIHBvc2l0aW9uOiBmaXhlZCAhaW1wb3J0YW50O1xuICAgIHotaW5kZXg6IDk5OTkgIWltcG9ydGFudDtcbiAgICB0b3A6IDAgIWltcG9ydGFudDtcbiAgICBsZWZ0OiAwICFpbXBvcnRhbnQ7XG4gICAgYm90dG9tOiAwICFpbXBvcnRhbnQ7XG4gICAgcmlnaHQ6IDAgIWltcG9ydGFudDtcbiAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICAgIGhlaWdodDogMTAwJSAhaW1wb3J0YW50OyB9XG4gIC50ZXJtLWNvbnRhaW5lciAudGVybS1jYW52YXMge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiAxO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIGJvdHRvbTogMDtcbiAgICByaWdodDogMDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7IH1cbiAgLnRlcm0tY29udGFpbmVyIC50ZXJtLXRleHRhcmVhIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgei1pbmRleDogMjtcbiAgICB3aWR0aDogMjBweDtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgb3BhY2l0eTogMDtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICByZXNpemU6IG5vbmU7IH1cbiAgLnRlcm0tY29udGFpbmVyIC50ZXJtLWNvcHkge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiAzO1xuICAgIHdpZHRoOiAyMHB4O1xuICAgIGhlaWdodDogMjBweDtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgIHJlc2l6ZTogbm9uZTsgfVxuICAudGVybS1jb250YWluZXIgLnRlcm0taGVhZGVyIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgei1pbmRleDogNDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDsgfVxuICAgIC50ZXJtLWNvbnRhaW5lciAudGVybS1oZWFkZXIgLnRlcm0tcmVjb3JkZXIge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgcmlnaHQ6IDEwcHg7XG4gICAgICB0b3A6IDEwcHg7XG4gICAgICBoZWlnaHQ6IDE4cHg7XG4gICAgICB3aWR0aDogMThweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGJvcmRlci1zdHlsZTogc29saWQ7XG4gICAgICBib3JkZXItd2lkdGg6IDA7XG4gICAgICBiYWNrZ3JvdW5kOiAjZjQ0MzM2O1xuICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTsgfVxuXG5Aa2V5ZnJhbWVzIGxvb3Age1xuICAwJSB7XG4gICAgYm9yZGVyLXdpZHRoOiAxcHg7IH1cbiAgNTAlIHtcbiAgICBib3JkZXItd2lkdGg6IDZweDsgfVxuICAxMDAlIHtcbiAgICBib3JkZXItd2lkdGg6IDFweDsgfSB9XG4gICAgICAudGVybS1jb250YWluZXIgLnRlcm0taGVhZGVyIC50ZXJtLXJlY29yZGVyLnJlY29yZGluZyB7XG4gICAgICAgIGJhY2tncm91bmQ6ICNmZjU3MjI7XG4gICAgICAgIGJvcmRlci1jb2xvcjogcmdiYSgyNTUsIDI1NCwgMjU0LCAwLjUpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIGFuaW1hdGlvbjogbG9vcCAxcyBsaW5lYXIgaW5maW5pdGU7IH1cbiAgICAgIC50ZXJtLWNvbnRhaW5lciAudGVybS1oZWFkZXIgLnRlcm0tcmVjb3JkZXIuY3JlYXRpbmcge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjMDA5Njg4O1xuICAgICAgICBib3JkZXItY29sb3I6IHJnYmEoMjU1LCAyNTQsIDI1NCwgMC41KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICBhbmltYXRpb246IGxvb3AgMXMgbGluZWFyIGluZmluaXRlOyB9XG4gIC50ZXJtLWNvbnRhaW5lciAudGVybS1jb250ZW50IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgei1pbmRleDogNTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICByaWdodDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIG92ZXJmbG93OiBhdXRvOyB9XG4gICAgLnRlcm0tY29udGFpbmVyIC50ZXJtLWNvbnRlbnQ6aG92ZXIge1xuICAgICAgY3Vyc29yOiB0ZXh0OyB9XG4gIC50ZXJtLWNvbnRhaW5lciAudGVybS1mb290ZXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiA2O1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGJvdHRvbTogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHJpZ2h0OiAwOyB9XG4gICAgLnRlcm0tY29udGFpbmVyIC50ZXJtLWZvb3RlciAudGVybS1yZXNpemUge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgcmlnaHQ6IDA7XG4gICAgICBib3R0b206IDA7XG4gICAgICB3aWR0aDogMjBweDtcbiAgICAgIGhlaWdodDogMjBweDtcbiAgICAgIGN1cnNvcjogbndzZS1yZXNpemU7IH1cbiJdfQ== */",m=(f=void 0===f?{}:f).insertAt,i&&"undefined"!=typeof document&&(g=document.head||document.getElementsByTagName("head")[0],(f=document.createElement("style")).type="text/css","top"===m&&g.firstChild?g.insertBefore(f,g.firstChild):g.appendChild(f),f.styleSheet?f.styleSheet.cssText=i:f.appendChild(document.createTextNode(i)));var b=e(function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return t.constructor?t.constructor.name:null}function a(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:["option"];return u(t,e,i),h(t,e,i),function(o,s,c){var t=l(s),e=l(o);if("object"===t){if("object"!==e)throw new Error("[Type Error]: '".concat(c.join("."),"' require 'object' type, but got '").concat(e,"'"));Object.keys(s).forEach(function(t){var e=o[t],i=s[t],n=c.slice();n.push(t),u(e,i,n),h(e,i,n),a(e,i,n)})}if("array"===t){if("array"!==e)throw new Error("[Type Error]: '".concat(c.join("."),"' require 'array' type, but got '").concat(e,"'"));o.forEach(function(t,e){var i=o[e],n=s[e]||s[0],r=c.slice();r.push(e),u(i,n,r),h(i,n,r),a(i,n,r)})}}(t,e,i),t}function u(t,e,i){if("string"===l(e)){var n=l(t);if(!(-1<(e="?"===e[0]?e.slice(1)+"|undefined":e).indexOf("|")?e.split("|").map(function(t){return t.toLowerCase().trim()}).filter(Boolean).some(function(t){return n===t}):e.toLowerCase().trim()===n))throw new Error("[Type Error]: '".concat(i.join("."),"' require '").concat(e,"' type, but got '").concat(n,"'"))}}function h(t,e,i){if("function"===l(e)){e=e(t,l(t),i);if(!0!==e){t=l(e);throw"string"===t?new Error(e):"error"===t?e:new Error("[Validator Error]: The scheme for '".concat(i.join("."),"' validator require return true, but got '").concat(e,"'"))}}}var o,l;t.exports=(o=Object.prototype.toString,a.kindOf=l=function(t){if(void 0===t)return"undefined";if(null===t)return"null";var e,i=n(t);if("boolean"===i)return"boolean";if("string"===i)return"string";if("number"===i)return"number";if("symbol"===i)return"symbol";if("function"===i)return"GeneratorFunction"===r(t)?"generatorfunction":"function";if(e=t,Array.isArray?Array.isArray(e):e instanceof Array)return"array";if(t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return"buffer";if(function(t){try{if("number"==typeof t.length&&"function"==typeof t.callee)return 1}catch(t){if(-1!==t.message.indexOf("callee"))return 1}}(t))return"arguments";if(t instanceof Date||"function"==typeof t.toDateString&&"function"==typeof t.getDate&&"function"==typeof t.setDate)return"date";if(t instanceof Error||"string"==typeof t.message&&t.constructor&&"number"==typeof t.constructor.stackTraceLimit)return"error";if(t instanceof RegExp||"string"==typeof t.flags&&"boolean"==typeof t.ignoreCase&&"boolean"==typeof t.multiline&&"boolean"==typeof t.global)return"regexp";switch(r(t)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if("function"==typeof t.throw&&"function"==typeof t.return&&"function"==typeof t.next)return"generator";switch(i=o.call(t)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return i.slice(8,-1).toLowerCase().replace(/\s/g,"")},a)}),y=function(){function t(){G(this,t)}return s(t,[{key:"on",value:function(t,e,i){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this}},{key:"once",value:function(n,r,o){var s=this;function c(){s.off(n,c);for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];r.apply(o,e)}return c._=r,this.on(n,c,o)}},{key:"emit",value:function(t){for(var e=((this.e||(this.e={}))[t]||[]).slice(),i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var o=0;o<e.length;o+=1)e[o].fn.apply(e[o].ctx,n);return this}},{key:"off",value:function(t,e){var i=this.e||(this.e={}),n=i[t],r=[];if(n&&e)for(var o=0,s=n.length;o<s;o+=1)n[o].fn!==e&&n[o].fn._!==e&&r.push(n[o]);return r.length?i[t]=r:delete i[t],this}}]),t}();var x=e(function(t){var e,i;e=window,i=function(){function p(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},f=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],g=f.length;function m(t){t=getComputedStyle(t);return t||e("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}var b,y=!1;function x(t){if(y||(y=!0,(d=document.createElement("div")).style.width="200px",d.style.padding="1px 2px 3px 4px",d.style.borderStyle="solid",d.style.borderWidth="1px 2px 3px 4px",d.style.boxSizing="border-box",(l=document.body||document.documentElement).appendChild(d),h=m(d),b=200==Math.round(p(h.width)),x.isBoxSizeOuter=b,l.removeChild(d)),(t="string"==typeof t?document.querySelector(t):t)&&"object"==typeof t&&t.nodeType){var e=m(t);if("none"==e.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<g;e++)t[f[e]]=0;return t}();var i={};i.width=t.offsetWidth,i.height=t.offsetHeight;for(var n=i.isBorderBox="border-box"==e.boxSizing,r=0;r<g;r++){var o=f[r],s=e[o],s=parseFloat(s);i[o]=isNaN(s)?0:s}var c=i.paddingLeft+i.paddingRight,a=i.paddingTop+i.paddingBottom,u=i.marginLeft+i.marginRight,h=i.marginTop+i.marginBottom,l=i.borderLeftWidth+i.borderRightWidth,d=i.borderTopWidth+i.borderBottomWidth,t=n&&b,n=p(e.width);!1!==n&&(i.width=n+(t?0:c+l));n=p(e.height);return!1!==n&&(i.height=n+(t?0:a+d)),i.innerWidth=i.width-(c+l),i.innerHeight=i.height-(a+d),i.outerWidth=i.width+u,i.outerHeight=i.height+h,i}}return x},t.exports?t.exports=i():e.getSize=i()}),v=e(function(t){var e,i;e="undefined"!=typeof window?window:n,i=function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},t=i[t]=i[t]||[];return-1==t.indexOf(e)&&t.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length){e=t.indexOf(e);return-1!=e&&t.splice(e,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],r=0;r<i.length;r++){var o=i[r];n&&n[o]&&(this.off(t,o),delete n[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t},t.exports?t.exports=i():e.EvEmitter=i()}),I=e(function(t){var e,i;e=window,i=function(n,t){function e(){}t=e.prototype=Object.create(t.prototype);t.bindStartEvent=function(t){this._bindStartEvent(t,!0)},t.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},t._bindStartEvent=function(t,e){var i=(e=void 0===e||e)?"addEventListener":"removeEventListener",e="mousedown";n.PointerEvent?e="pointerdown":"ontouchstart"in n&&(e="touchstart"),t[i](e,this)},t.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},t.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier)return i}},t.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},t.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},t.onpointerdown=function(t){this._pointerDown(t,t)},t._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},t.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var i={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return t._bindPostStartEvents=function(t){t&&((t=i[t.type]).forEach(function(t){n.addEventListener(t,this)},this),this._boundPointerEvents=t)},t._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(t){n.removeEventListener(t,this)},this),delete this._boundPointerEvents)},t.onmousemove=function(t){this._pointerMove(t,t)},t.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},t.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},t._pointerMove=function(t,e){this.pointerMove(t,e)},t.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},t.onmouseup=function(t){this._pointerUp(t,t)},t.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},t.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},t._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},t.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},t._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},t._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},t.pointerDone=function(){},t.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},t.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},t._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},t.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},e.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},e},t.exports?t.exports=i(e,v):e.Unipointer=i(e,e.EvEmitter)}),w=e(function(t){var e,i;e=window,i=function(o,t){function e(){}var i=e.prototype=Object.create(t.prototype);i.bindHandles=function(){this._bindHandles(!0)},i.unbindHandles=function(){this._bindHandles(!1)},i._bindHandles=function(t){for(var e=(t=void 0===t||t)?"addEventListener":"removeEventListener",i=t?this._touchActionValue:"",n=0;n<this.handles.length;n++){var r=this.handles[n];this._bindStartEvent(r,t),r[e]("click",this),o.PointerEvent&&(r.style.touchAction=i)}},i._touchActionValue="none",i.pointerDown=function(t,e){this.okayPointerDown(t)&&(this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))};var n={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},r={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return i.okayPointerDown=function(t){var e=n[t.target.nodeName],t=r[t.target.type],t=!e||t;return t||this._pointerReset(),t},i.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},i.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},i._dragPointerMove=function(t,e){var i={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(t,e),i},i.hasDragStarted=function(t){return 3<Math.abs(t.x)||3<Math.abs(t.y)},i.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},i._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},i._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},i.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},i._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},i.dragMove=function(t,e,i){t.preventDefault(),this.emitEvent("dragMove",[t,e,i])},i._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},i.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},i.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},i._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},i.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},e.getPointerPoint=t.getPointerPoint,e},t.exports?t.exports=i(e,I):e.Unidragger=i(e,e.Unipointer)}),C=e(function(t){var e,i;e=window,i=function(r,s,t){function i(t,e){for(var i in e)t[i]=e[i];return t}var n=r.jQuery;function e(t,e){this.element="string"==typeof t?document.querySelector(t):t,n&&(this.$element=n(this.element)),this.options=i({},this.constructor.defaults),this.option(e),this._create()}t=e.prototype=Object.create(t.prototype);e.defaults={},t.option=function(t){i(this.options,t)};var o={relative:!0,absolute:!0,fixed:!0};function c(t,e,i){return i=i||"round",e?Math[i](t/e)*e:t}return t._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=i({},this.position);var t=getComputedStyle(this.element);o[t.position]||(this.element.style.position="relative"),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},t.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},t.dispatchEvent=function(t,e,i){var n=[e].concat(i);this.emitEvent(t,n),this.dispatchJQueryEvent(t,e,i)},t.dispatchJQueryEvent=function(t,e,i){var n=r.jQuery;n&&this.$element&&((e=n.Event(e)).type=t,this.$element.trigger(e,i))},t._getPosition=function(){var t=getComputedStyle(this.element),e=this._getPositionCoord(t.left,"width"),i=this._getPositionCoord(t.top,"height");this.position.x=isNaN(e)?0:e,this.position.y=isNaN(i)?0:i,this._addTransformPosition(t)},t._getPositionCoord=function(t,e){if(-1==t.indexOf("%"))return parseInt(t,10);var i=s(this.element.parentNode);return i?parseFloat(t)/100*i[e]:0},t._addTransformPosition=function(t){var e,i=t.transform;0===i.indexOf("matrix")&&(e=i.split(","),t=0===i.indexOf("matrix3d")?12:4,i=parseInt(e[t],10),t=parseInt(e[1+t],10),this.position.x+=i,this.position.y+=t)},t.onPointerDown=function(t,e){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",t,[e])},t.pointerDown=function(t,e){this.okayPointerDown(t)&&this.isEnabled?(this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",t,[e])):this._pointerReset()},t.dragStart=function(t,e){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",t,[e]),this.animate())},t.measureContainment=function(){var t,e,i,n,r,o=this.getContainer();o&&(t=s(this.element),e=s(o),i=this.element.getBoundingClientRect(),r=o.getBoundingClientRect(),n=e.borderLeftWidth+e.borderRightWidth,o=e.borderTopWidth+e.borderBottomWidth,r=this.relativeStartPosition={x:i.left-(r.left+e.borderLeftWidth),y:i.top-(r.top+e.borderTopWidth)},this.containSize={width:e.width-n-r.x-t.width,height:e.height-o-r.y-t.height})},t.getContainer=function(){var t=this.options.containment;if(t)return t instanceof HTMLElement?t:"string"==typeof t?document.querySelector(t):this.element.parentNode},t.onPointerMove=function(t,e,i){this.dispatchJQueryEvent("pointerMove",t,[e,i])},t.dragMove=function(t,e,i){var n,r,o,s;this.isEnabled&&(o=i.x,s=i.y,n=(r=this.options.grid)&&r[0],r=r&&r[1],o=c(o,n),s=c(s,r),o=this.containDrag("x",o,n),s=this.containDrag("y",s,r),o="y"==this.options.axis?0:o,s="x"==this.options.axis?0:s,this.position.x=this.startPosition.x+o,this.position.y=this.startPosition.y+s,this.dragPoint.x=o,this.dragPoint.y=s,this.dispatchEvent("dragMove",t,[e,i]))},t.containDrag=function(t,e,i){if(!this.options.containment)return e;var n="x"==t?"width":"height",t=c(-this.relativeStartPosition[t],i,"ceil"),n=c(n=this.containSize[n],i,"floor");return Math.max(t,Math.min(n,e))},t.onPointerUp=function(t,e){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",t,[e])},t.dragEnd=function(t,e){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",t,[e]))},t.animate=function(){var t;this.isDragging&&(this.positionDrag(),t=this,requestAnimationFrame(function(){t.animate()}))},t.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},t.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},t.staticClick=function(t,e){this.dispatchEvent("staticClick",t,[e])},t.setPosition=function(t,e){this.position.x=t,this.position.y=e,this.setLeftTop()},t.enable=function(){this.isEnabled=!0},t.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},t.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},t._init=function(){},n&&n.bridget&&n.bridget("draggabilly",e),e},t.exports?t.exports=i(e,x,w):e.Draggabilly=i(e,e.getSize,e.Unidragger)});function k(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function P(t,e){var i=t.options,n=i.dragOpt,r=i.draggable,i=t.template.$container;r&&(e.draggie=new C(i,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?k(Object(i),!0).forEach(function(t){o(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({handle:".term-header"},n)),t.on("destroy",function(){e.draggie.destroy()}))}var Q=e(function(t){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.default=t.exports,t.exports.__esModule=!0});t(Q);var L=e(function(t){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0});t(L);var A=e(function(n){function r(t,e,i){return L()?n.exports=r=Reflect.construct:n.exports=r=function(t,e,i){var n=[null];n.push.apply(n,e);n=new(Function.bind.apply(t,n));return i&&a(n,i.prototype),n},n.exports.default=n.exports,n.exports.__esModule=!0,r.apply(null,arguments)}n.exports=r,n.exports.default=n.exports,n.exports.__esModule=!0});function E(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(i);return e=n?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),l(this,e)}}t(A);var D=function(t){u(i,t);var e=E(i);function i(t){return G(this,i),(t=e.call(this,t)).name="TermError",t}return i}(t(e(function(e){function n(t){var i="function"==typeof Map?new Map:void 0;return e.exports=n=function(t){if(null===t||!Q(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,e)}function e(){return A(t,arguments,d(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0}))(Error));function B(t,e){if(!t)throw new D(e);return t}function O(t,e){var i=document.createElement("a");i.style.display="none",i.href=t,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function M(n,r,o){var s;return function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];clearTimeout(s),s=setTimeout(function(){s=null,n.apply(o,e)},r)}}function F(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})}function R(t){return t.replace(/[&<>'"]/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[t]||t})}var U=Object.freeze({__proto__:null,TermError:D,errorHandle:B,clamp:function(t,e,i){return Math.max(Math.min(t,Math.max(e,i)),Math.min(e,i))},download:O,debounce:M,uuid:F,escape:R,unescape:function(t){return t.replace(/&amp;|&lt;|&gt;|&#39;|&quot;/g,function(t){return{"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'}[t]||t})}});var W="input",S="output",N="radio",_="checkbox",T={videoBitsPerSecond:5e6,mimeType:"video/webm"};function X(n){var r=n.template.$textarea,o=0;n.on("enter",function(){o=0}),n.on("render",function(){n.drawer&&!n.drawer.renderEditable&&(o=0)}),n.on("history",function(t){var e,i;e=t,i=n.drawer.cacheEmits,(t=(t=i.filter(function(t,e){return t.type===W&&t.text.trim()&&e!==i.length-1}))[t.length+o+e])&&(o+=e,r.value=t.text,n.drawer.emit({type:W,text:t.text,replace:!0}))})}var j=function(){function j(t){var e,i,n,r,o,s,c,a,u,h,l,d,p,f,g,m,b,y,x,v,I,w,C,k,Q,L,A,E,D,B,O,F,R,U,W,S,N,_,T;G(this,j),this.term=t,this.destroyEvents=[],this.proxy=this.proxy.bind(this),i=this,n=(e=t).template.$textarea,i.proxy(document,["click","contextmenu","dblclick"],function(t){t.composedPath&&-1<t.composedPath().indexOf(e.template.$content)?(e.isFocus=!0,e.emit("focus"),e.emit(t.type,t)):e.isFocus&&(e.isFocus=!1,e.emit("blur"))}),e.on("focus",function(){n.focus()}),e.on("click",function(t){t=i.getLogFromEvent(t).log;t&&t.href&&window.open(t.href)}),e.options.autofocus&&setTimeout(function(){e.template.$content.click()},10),w=this,o=(r=t).template,s=o.$container,c=o.$content,_=o.$resize,a=o.$canvas,u=o.$header,h=o.$footer,l=r.options.pixelRatio,d=!1,m=g=f=p=0,w.proxy(_,"mousedown",function(t){d=!0;var e=s.clientWidth,i=s.clientHeight;g=e,m=i,p=t.pageX,f=t.pageY}),w.proxy(document,"mousemove",function(t){var e;d&&(c.style.visibility="hidden",e=g+t.pageX-p,t=m+t.pageY-f,300<=e&&300<=t&&(s.style.width="".concat(e,"px"),s.style.height="".concat(t,"px")))}),w.proxy(document,"mouseup",function(){var t,e;d&&(d=!1,m=g=f=p=0,c.style.visibility="visible",t=s.clientWidth,e=s.clientHeight,r.emit("resize",{width:t,height:e}))}),r.on("resize",function(t){var e=t.width,t=t.height;s.style.width="".concat(e,"px"),s.style.height="".concat(t,"px"),a.width=e*l,a.height=t*l,r.drawer.init()}),r.on("size",function(t){var e=t.header,i=t.content,t=t.footer;u.style.height="".concat(e,"px"),h.style.height="".concat(t,"px"),c.style.top="".concat(e,"px"),c.style.height="".concat(i,"px")}),P(t,this),_=this,y=(b=t).template.$textarea,_.proxy(y,"input",function(){b.emit("input",y.value)}),_.proxy(y,"paste",function(){b.emit("input",y.value)}),b.on("cursor",function(t){var e=t.left,t=t.top;y.style.top="".concat(t,"px"),y.style.left="".concat(e,"px")}),w=this,(x=t).options.recorder&&(v=x.template.$recorder,w.proxy(v,"click",function(){x.recorder.recording?x.recorder.end():x.recorder.start()}),x.on("start",function(){v.classList.remove("creating"),v.classList.add("recording")}),x.on("creating",function(){v.classList.remove("recording"),v.classList.add("creating")}),x.on("end",function(){v.classList.remove("recording"),v.classList.remove("creating")})),_=this,w=(I=t).template,C=w.$content,k=w.$scrollbar,Q=!1,_.proxy(C,"scroll",function(){Q?I.drawer.renderByTop(C.scrollTop):Q=!0}),I.on("scrollTop",function(t){Q?Q=!1:C.scrollTop=t}),I.on("scrollHeight",function(t){k.style.height="".concat(t,"px")}),A=this,E=(L=t).template.$copy,D=[],B=0,L.on("click",function(){var t,e,i,n,r,o,s;L.drawer.render(!1),B&&D.length&&Date.now()-B<=300?(t=(o=L.drawer).fontSize,e=o.ctx,i=o.contentWidth,n=o.contentPadding,r=(s=L.options).background,o=s.color,s=D.reduce(function(t,e){return t+e.text},""),e.fillStyle=o,e.fillRect(n[3],D[0].top,i,t),e.fillStyle=r,e.fillText(s,n[3],D[0].top),E.value=s,E.focus(),E.select()):(D=[],B=0,E.value="")}),L.on("dblclick",function(t){L.drawer.render(!1);var e,i,n=A.getLogFromEvent(t),r=n.line,o=n.log;D=[],B=0,E.value="",o&&(e=(i=L.drawer).ctx,t=i.fontSize,i=(n=L.options).background,n=n.color,D=r,B=Date.now(),e.fillStyle=n,e.fillRect(o.left,o.top,o.width,t),e.fillStyle=i,e.fillText(o.text,o.left,o.top),E.value=o.text,E.focus(),E.select())}),L.on("blur",function(){L.drawer.render(!1),D=[],B=0,E.value=""}),F=this,_=(O=t).template,R=_.$container,U=_.$header,W=!1,S=M(function(){var t=document.body.getBoundingClientRect(),e=t.width,t=t.height;O.emit("resize",{width:e,height:t})},100),O.on("fullscreen",function(t){(W=t)?(S(),R.classList.add("is-fullscreen"),F.draggie&&F.draggie.disable()):(R.classList.remove("is-fullscreen"),O.emit("resize",{width:O.options.width,height:O.options.height}),F.draggie&&F.draggie.enable())}),F.proxy(U,"dblclick",function(t){t.target===U&&O.emit("fullscreen",!W)}),F.proxy(window,"resize",function(){W&&S()}),X(t),_=this,T=(N=t).template.$textarea,_.proxy(T,"keydown",function(t){N.emit("keydown",t);var e=t.keyCode;13===e&&(N.emit("enter",T.value),T.value=""),t.ctrlKey&&67===e&&(T.value="",N.input(),N.emit("abort")),[37,38,39,40].includes(e)&&t.preventDefault(),N.drawer.renderEditable&&(38===e&&N.emit("history",-1),40===e&&N.emit("history",1))})}return s(j,[{key:"getLogFromEvent",value:function(t){var e=this.term.template.$content,i=this.term.options.pixelRatio,e=e.getBoundingClientRect(),n=(t.pageX-e.left)*i,t=(t.pageY-e.top)*i,e=this.term.drawer,i=e.renderLines,e=e.lineHeight,t=i[Math.floor(t/e)]||[],e=t.find(function(t){return n>t.left&&t.left+t.width>=n});return{line:t,log:e}}},{key:"proxy",value:function(e,t,i){var n=this,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};Array.isArray(t)?t.forEach(function(t){return n.proxy(e,t,i,r)}):(e.addEventListener(t,i,r),this.destroyEvents.push(function(){e.removeEventListener(t,i,r)}))}},{key:"destroy",value:function(){this.destroyEvents.forEach(function(t){return t()})}}]),j}(),Z=function(){function c(t){var e=this;G(this,c);var i=(this.term=t).options,n=i.container,r=i.pixelRatio,o=i.width,s=i.height,i=i.recorder;this.$container=n,"string"==typeof t.options.container&&(this.$container=document.querySelector(t.options.container)),B(t.constructor.instances.every(function(t){return t.template.$container!==e.$container}),"Cannot mount multiple instances on the same dom element, please destroy the previous instance first."),this.$container.classList.add("term-container"),this.$container.style.width="".concat(o,"px"),this.$container.style.height="".concat(s,"px"),this.$canvas=document.createElement("canvas"),this.$canvas.classList.add("term-canvas"),this.$canvas.width=o*r,this.$canvas.height=s*r,this.$container.appendChild(this.$canvas),this.$textarea=document.createElement("textarea"),this.$textarea.classList.add("term-textarea"),this.$container.appendChild(this.$textarea),this.$copy=document.createElement("textarea"),this.$copy.classList.add("term-copy"),this.$container.appendChild(this.$copy),this.$header=document.createElement("div"),this.$header.classList.add("term-header"),this.$container.appendChild(this.$header),this.$content=document.createElement("div"),this.$content.classList.add("term-content"),this.$container.appendChild(this.$content),this.$scrollbar=document.createElement("div"),this.$scrollbar.classList.add("term-scrollbar"),this.$scrollbar.style.height="0",this.$content.appendChild(this.$scrollbar),this.$footer=document.createElement("div"),this.$footer.classList.add("term-footer"),this.$container.appendChild(this.$footer),this.$resize=document.createElement("div"),this.$resize.classList.add("term-resize"),this.$footer.appendChild(this.$resize),i&&(this.$recorder=document.createElement("div"),this.$recorder.classList.add("term-recorder"),this.$header.appendChild(this.$recorder))}return s(c,[{key:"destroy",value:function(){this.$container.classList.remove("term-container"),this.$container.innerHTML=""}}]),c}(),H=e(function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n},t.exports.default=t.exports,t.exports.__esModule=!0});t(H);var $=e(function(t){t.exports=function(t){if(Array.isArray(t))return H(t)},t.exports.default=t.exports,t.exports.__esModule=!0});t($);var V=e(function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0});t(V);var z=e(function(t){t.exports=function(t,e){if(t){if("string"==typeof t)return H(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?H(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0});t(z);var J=e(function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0});t(J);var Y=t(e(function(t){t.exports=function(t){return $(t)||V(t)||z(t)||J()},t.exports.default=t.exports,t.exports.__esModule=!0})),q=e(function(t,e){t.exports=function(){var t=document.createElement("canvas");t.style.position="fixed",t.style.left="-999px",t.style.top="-999px",t.width=100,t.height=100,document.body.appendChild(t);var e=t.getContext("2d");e.textBaseline="top",e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,100,100),e.fillStyle="rgb(255, 255, 255)",e.fillText("T",0,10);for(var o={},i=1;i<=100;i++){e.fillStyle="rgb(0, 0, 0)";e.fillRect(0,0,100,100);e.fillStyle="rgb(255, 255, 255)";e.font=i+"px Arial";e.fillText("T",0,10);var n=5*i/10;for(var r=0;r<20;r++){var s=e.getImageData(n,r,1,1).data;if(s[0]!==0&&s[1]!==0&&s[2]!==0){o[i]=r-10;break}}}return document.body.removeChild(t),function(n){if(typeof n!=="object")return n;var t=Object.getPrototypeOf(n);var r=t.fillText;if(typeof r!=="function")return n;n.fillText=function(){var t=arguments[2];if(typeof t==="number"){var e=n.font.match(/(\d+)(?:\.\d?)?px/i);if(e&&e[1]){var i=o[e[1]];if(i)arguments[2]=t-i}}return r.apply(this,arguments)};return n}}()});function K(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function tt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?K(Object(i),!0).forEach(function(t){o(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):K(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function et(t,e){var s={bools:{},strings:{},unknownFn:null};"function"==typeof(e=e||{}).unknown&&(s.unknownFn=e.unknown),"boolean"==typeof e.boolean&&e.boolean?s.allBools=!0:[].concat(e.boolean).filter(Boolean).forEach(function(t){s.bools[t]=!0});var c={};Object.keys(e.alias||{}).forEach(function(t){c[t]=[].concat(e.alias[t]),c[t].forEach(function(e){c[e]=[t].concat(c[t].filter(function(t){return e!==t}))})}),[].concat(e.string).filter(Boolean).forEach(function(t){s.strings[t]=!0,c[t]&&(s.strings[c[t]]=!0)});var r=e.default||{},a={_:[]};Object.keys(s.bools).forEach(function(t){n(t,void 0!==r[t]&&r[t])});var i=[];function n(t,e,i){var n,r,o;i&&s.unknownFn&&(n=t,r=i,!(s.allBools&&/^--[^=]+$/.test(r)||s.strings[n]||s.bools[n]||c[n]))&&!1===s.unknownFn(i)||(o=!s.strings[t]&&nt(e)?Number(e):e,u(a,t.split("."),o),(c[t]||[]).forEach(function(t){u(a,t.split("."),o)}))}function u(t,e,i){for(var n,r=t,o=0;o<e.length-1;o++){if("__proto__"===(n=e[o]))return;void 0===r[n]&&(r[n]={}),r[n]!==Object.prototype&&r[n]!==Number.prototype&&r[n]!==String.prototype||(r[n]={}),r[n]===Array.prototype&&(r[n]=[]),r=r[n]}"__proto__"!==(n=e[e.length-1])&&(void 0===(r=(r=r===Object.prototype||r===Number.prototype||r===String.prototype?{}:r)===Array.prototype?[]:r)[n]||s.bools[n]||"boolean"==typeof r[n]?r[n]=i:Array.isArray(r[n])?r[n].push(i):r[n]=[r[n],i])}function o(t){return c[t].some(function(t){return s.bools[t]})}-1!==t.indexOf("--")&&(i=t.slice(t.indexOf("--")+1),t=t.slice(0,t.indexOf("--")));for(var h=0;h<t.length;h++){var l=t[h];if(/^--.+=/.test(l)){var d=l.match(/^--([^=]+)=([\s\S]*)$/),p=d[1],d=d[2];n(p,d=s.bools[p]?"false"!==d:d,l)}else if(/^--no-.+/.test(l))n(p=l.match(/^--no-(.+)/)[1],!1,l);else if(/^--.+/.test(l)){p=l.match(/^--(.+)/)[1];void 0===(f=t[h+1])||/^-/.test(f)||s.bools[p]||s.allBools||c[p]&&o(p)?/^(true|false)$/.test(f)?(n(p,"true"===f,l),h++):n(p,!s.strings[p]||"",l):(n(p,f,l),h++)}else if(/^-[^-]+/.test(l)){for(var f,g=l.slice(1,-1).split(""),m=!1,b=0;b<g.length;b++)if("-"!==(f=l.slice(b+2))){if(/[A-Za-z]/.test(g[b])&&/=/.test(f)){n(g[b],f.split("=")[1],l),m=!0;break}if(/[A-Za-z]/.test(g[b])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(f)){n(g[b],f,l),m=!0;break}if(g[b+1]&&g[b+1].match(/\W/)){n(g[b],l.slice(b+2),l),m=!0;break}n(g[b],!s.strings[g[b]]||"",l)}else n(g[b],f,l);p=l.slice(-1)[0];m||"-"===p||(!t[h+1]||/^(-|--)[^-]/.test(t[h+1])||s.bools[p]||c[p]&&o(p)?t[h+1]&&/^(true|false)$/.test(t[h+1])?(n(p,"true"===t[h+1],l),h++):n(p,!s.strings[p]||"",l):(n(p,t[h+1],l),h++))}else if(s.unknownFn&&!1===s.unknownFn(l)||a._.push(s.strings._||!nt(l)?l:Number(l)),e.stopEarly){a._.push.apply(a._,t.slice(h+1));break}}return Object.keys(r).forEach(function(e){var t,i,n;t=a,i=e.split("."),n=t,i.slice(0,-1).forEach(function(t){n=n[t]||{}}),i[i.length-1]in n||(u(a,e.split("."),r[e]),(c[e]||[]).forEach(function(t){u(a,t.split("."),r[e])}))}),e["--"]?(a["--"]=new Array,i.forEach(function(t){a["--"].push(t)})):i.forEach(function(t){a._.push(t)}),a}var it=function(){function r(i){G(this,r);var t=(this.term=i).options,e=t.pixelRatio,n=t.fontSize,t=this.term.template.$canvas;this.scrollTop=0,this.scrollHeight=0,this.lineGap=10*e,this.fontSize=n*e,this.lineHeight=this.lineGap+this.fontSize,this.controlSize=6*e,this.controlColor=["#FF5F56","#FFBD2E","#27C93F"],this.renderIndex=-1,this.$watermark=null,this.$tmp=document.createElement("div"),this.ctx=q(t.getContext("2d")),this.contentPadding=[45,15,15,15].map(function(t){return t*e}),this.cacheEmits=[],this.cacheLines=[],this.renderLines=[],this.emit=this.emit.bind(this),this.clear=this.clear.bind(this),this.init(),this.cursor=!1,function t(){var e=this;setTimeout(function(){i.isDestroy||(e.cursor=!e.cursor,e.renderCursor(),t.call(e))},500)}.call(this)}return s(r,[{key:"init",value:function(){var t=this.term,e=t.template.$canvas,i=t.options,t=i.pixelRatio,i=i.fontFamily;this.canvasHeight=e.height,this.canvasWidth=e.width,this.contentHeight=this.canvasHeight-this.contentPadding[0]-this.contentPadding[2],this.contentWidth=this.canvasWidth-this.contentPadding[3]-this.contentPadding[1]/2,this.maxLength=Math.floor(this.contentHeight/this.lineHeight),this.ctx.textBaseline="top",this.ctx.font="".concat(this.fontSize,"px ").concat(i),this.term.emit("size",{header:this.contentPadding[0]/t,content:this.contentHeight/t,footer:this.contentPadding[2]/t}),this.loadWatermark(),this.render()}},{key:"lastCacheLog",get:function(){var t=this.cacheLines[this.cacheLines.length-1];return t&&t[t.length-1]}},{key:"lastRenderLog",get:function(){var t=this.renderLines[this.renderLines.length-1];return t&&t[t.length-1]}},{key:"cacheEditable",get:function(){return this.term.isFocus&&this.lastCacheLog&&this.lastCacheLog.type===W}},{key:"renderEditable",get:function(){return this.cacheEditable&&this.lastCacheLog===this.lastRenderLog}},{key:"cursorPos",get:function(){if(this.renderEditable){var t=this.term.options.pixelRatio;return{left:this.lastRenderLog.left+this.lastRenderLog.width+2*t,top:this.contentPadding[0]+this.lineHeight*(this.renderLines.length-1)}}return{left:0,top:0}}},{key:"render",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this.term.isDestroy||(this.renderBackground(),this.renderTopbar(),this.renderContent(),t&&this.autoScroll(),this.term.emit("render")),this}},{key:"renderBackground",value:function(){var t,e,i=this.term.options,n=i.background,r=i.pixelRatio,o=i.debug;this.ctx.fillStyle=n,this.ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.$watermark&&(t=(e=this.$watermark).width/r,i=e.height/r,n=this.canvasWidth-t,e=this.canvasHeight-i,this.ctx.drawImage(this.$watermark,n,e,t,i)),o&&(this.ctx.fillStyle="green",this.ctx.fillRect(0,this.contentPadding[0],this.canvasWidth,r),this.ctx.fillRect(0,this.contentPadding[0]+this.contentHeight,this.canvasWidth,r),this.ctx.fillRect(this.contentPadding[3],0,r,this.canvasHeight),this.ctx.fillRect(this.contentPadding[3]+this.contentWidth,0,r,this.canvasHeight))}},{key:"loadWatermark",value:function(){var t,e=this,i=this.term.options.watermark;i&&(this.$watermark&&this.$watermark.src===i||((t=new Image).onload=function(){e.$watermark=t,e.render(!1)},t.src=i))}},{key:"renderTopbar",value:function(){var n=this,t=this.term.options,e=t.title,i=t.color,t=t.pixelRatio;this.ctx.fillStyle=i;i=this.ctx.measureText(e).width;this.ctx.fillText(e,this.canvasWidth/2-i/2,this.contentPadding[1]-t/3),this.controlColor.forEach(function(t,e){n.ctx.beginPath();var i=n.contentPadding[3]+e*n.controlSize*3.6+n.controlSize,e=n.contentPadding[1]+n.controlSize;n.ctx.arc(i,e,n.controlSize,0,360,!1),n.ctx.fillStyle=t,n.ctx.fill(),n.ctx.closePath()})}},{key:"renderContent",value:function(){var t,e=this.term.options,i=e.pixelRatio,n=e.color,r=e.debug;if(this.renderLines.length)for(var o=0;o<this.renderLines.length;o+=1){var s=this.renderLines[o];if(s&&s.length)for(var c=0;c<s.length;c+=1){var a=s[c],u=this.contentPadding[0]+this.lineHeight*o;r&&(this.ctx.fillStyle="red",this.ctx.fillRect(0,u,this.canvasWidth,i),this.ctx.fillRect(0,u+this.fontSize,this.canvasWidth,i)),a.top=u,a.background&&(this.ctx.fillStyle=a.background,this.ctx.fillRect(a.left,u,a.width,this.fontSize)),this.ctx.fillStyle=a.color||n,this.ctx.fillText(a.text,a.left,u),(a.href||a.underline)&&this.ctx.fillRect(a.left,u+this.fontSize,a.width,i),a.del&&this.ctx.fillRect(a.left,u+Math.ceil(this.fontSize/2),a.width,i),a.border&&(this.ctx.fillRect(a.left,u,a.width,i),this.ctx.fillRect(a.left,u+this.fontSize-i,a.width,i),this.ctx.fillRect(a.left,u,i,this.fontSize),this.ctx.fillRect(a.left+a.width-i,u,i,this.fontSize))}}this.renderEditable&&(e=(t=this.cursorPos).left,t=t.top,this.term.emit("cursor",{left:e/i,top:t/i})),this.scrollHeight=this.cacheLines.length*this.lineHeight/i,this.term.emit("scrollHeight",this.scrollHeight)}},{key:"autoScroll",value:function(){var t=this.term.options.pixelRatio,e=this.renderLines[this.renderLines.length-1],e=this.cacheLines.indexOf(e);this.scrollTop=((e+1)*this.lineHeight-this.contentHeight)/t,this.term.emit("scrollTop",this.scrollTop)}},{key:"renderByIndex",value:function(t){this.renderIndex!==t&&(this.renderIndex=t,this.renderLines=this.cacheLines.slice(t,t+this.maxLength),this.render(!1))}},{key:"renderByTop",value:function(t){var e=this.term.options.pixelRatio,e=Math.ceil(t*e/this.lineHeight);this.renderByIndex(e)}},{key:"renderCursor",value:function(){var t=this.term.options,e=t.background,i=t.color,n=t.pixelRatio,r=this.cursorPos,t=r.left,r=r.top;this.renderEditable&&t&&r&&(this.ctx.fillStyle=this.cursor?i:e,this.ctx.fillRect(t,r,5*n,this.fontSize))}},{key:"emit",value:function(t){var e;b(t,{type:function(t){return!![W,S].includes(t)||'The type must be "'.concat(W,'" or "').concat(S,'"')},text:"string",prefix:"undefined|string",replace:"undefined|boolean"}),t.replace&&(this.cacheEmits.pop(),(e=this.cacheLines[this.cacheLines.length-1])&&e.groupId&&(this.cacheLines=this.cacheLines.filter(function(t){return t.groupId!==e.groupId}))),this.cacheEmits.push(tt({},t));var i=this.parse(t);(t=this.cacheLines).push.apply(t,Y(i)),this.renderLines=this.cacheLines.slice(-this.maxLength),this.render()}},{key:"parse",value:function(t){var e=this.term.options.prefix;t.type===W&&(t.text=(t.prefix||e)+R(t.text));for(var i=F(),n=[],r=t.text.split(/\r?\n/),o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=0,c=this.contentPadding[3],a=0;a<r.length;a+=1){var u=r[a];this.$tmp.innerHTML=u.replace(o,"");for(var h=0;h<this.$tmp.childNodes.length;h+=1){var l=this.$tmp.childNodes[h],d=l.textContent,p=this.ctx.measureText(d).width,f={};l.tagName&&(f.color=l.getAttribute("color"),f.background=l.getAttribute("background"),f.href=l.getAttribute("href"),f.border=l.hasAttribute("border"),f.underline=l.hasAttribute("underline"),f.del=l.hasAttribute("del"));var g=c+p;if(g>this.contentWidth){for(var m="",b=!1,y=c,x=Y(d),v=0;v<x.length;v+=1)var I=x[v],w=this.ctx.measureText(I).width,C=c+w,c=C<=this.contentWidth?(m+=I,C):(C=tt(tt(tt({},t),f),{},{width:this.ctx.measureText(m).width,left:b?this.contentPadding[3]:y,text:m}),n[s]?n[s].push(C):(n[s]=[C],n[s].groupId=i),s+=1,m=I,b=!0,this.contentPadding[3]+w);l=tt(tt(tt({},t),f),{},{width:this.ctx.measureText(m).width,left:b?this.contentPadding[3]:y,text:m});n[s]?n[s].push(l):(n[s]=[l],n[s].groupId=i)}else{d=tt(tt(tt({},t),f),{},{width:p,left:c,text:d});n[s]?n[s].push(d):(n[s]=[d],n[s].groupId=i),c=g}}s+=1,c=this.contentPadding[3]}return n.filter(Boolean)}},{key:"clear",value:function(){this.cacheEmits=[],this.cacheLines=[],this.renderLines=[],this.render()}}]),r}();function nt(t){return"number"==typeof t||(/^0x[0-9a-f]+$/i.test(t)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t))}var rt=function(){function r(t){var e=this;G(this,r);var i=(this.term=t).drawer,n=t.options.welcome;this.isTyping=!1,this.typeTimer=null,this.askResolve=null,this.type=this.type.bind(this),this.input=this.input.bind(this),this.output=this.output.bind(this),this.ask=function(t){return B(!e.isQuestion,"The last problem has not been solved"),e.question(t)},this.output(n).input(),t.on("input",function(t){i.cacheEditable&&(e.isQuestion?e.question(i.lastCacheLog.prefix,t):e.input(t,!0))}),t.on("enter",function(t){i.cacheEditable&&t.trim()&&(e.isQuestion?(e.askResolve(t),e.askResolve=null):e.execute(t))}),t.on("abort",function(){e.stopType()})}return s(r,[{key:"isQuestion",get:function(){var t=this.term.drawer,e=t.lastCacheLog;return t.cacheEditable&&e.prefix&&"function"==typeof this.askResolve}},{key:"execute",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(!t.trim())return this.input();var i=this.term.options,n=i.parseOpt,r=i.notFound,o=i.loading,i=this.findAction(t),n=et(t.split(" "),n);if(!i){r=r.call(this.term,t,n);return this.output(r).input()}if("function"!=typeof i.output)return this.output(i.output).input();try{var s=i.output.call(this.term,t,n);if("promise"!==b.kindOf(s))return void 0!==s?this.output(s).input():this;var c=o.call(this.term,t,n);return this.output(c),s.then(function(t){return void 0!==t?e.output(t,!0).input():e}).catch(function(t){t=("error"===b.kindOf(t)?"":"Error: ").concat(String(t)),t='<d color="red">'.concat(t,"</d>");return e.output(t,!0).input()})}catch(t){s='<d color="red">'.concat(String(t),"</d>");return this.output(s).input()}}},{key:"findAction",value:function(i){return i=i.trim().toLowerCase(),this.term.options.actions.find(function(t){var e=b.kindOf(t.input);return"string"===e?i===t.input:"regexp"===e?t.input.test(i):null})}},{key:"output",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this.term.drawer.emit({type:S,replace:1<arguments.length&&void 0!==arguments[1]&&arguments[1],text:String(t)}),this}},{key:"input",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this.term.drawer.emit({type:W,replace:1<arguments.length&&void 0!==arguments[1]&&arguments[1],text:String(t)}),this}},{key:"question",value:function(){var e=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return this.isQuestion?this.term.drawer.emit({type:W,replace:!0,prefix:i,text:n}):new Promise(function(t){e.askResolve=t,e.term.drawer.emit({type:W,replace:!1,prefix:i,text:n})})}},{key:"type",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",s=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(this.isTyping)return Promise.reject();var c=this.term.template.$textarea;return new Promise(function(n){var r=Y(e),o="";!function t(){var e,i=this;r.length?(this.isTyping=!0,e=r.shift(),o+=e,this.input(o,!0),this.typeTimer=setTimeout(function(){i.term.isDestroy||t.call(i)},100)):(this.isTyping=!1,c.value=o,s&&(this.execute(o),c.value=""),n(o))}.call(t)})}},{key:"stopType",value:function(){clearTimeout(this.typeTimer)}}]),r}(),ot=function(){function e(t){G(this,e),this.term=t,this.blobs=[]}return s(e,[{key:"recording",get:function(){return this.recorder&&"recording"===this.recorder.state}},{key:"size",get:function(){return this.blobs.reduce(function(t,e){return t+e.size},0)}},{key:"duration",get:function(){return this.blobs.length}},{key:"start",value:function(){var e=this;B(!this.recording,"The recorder is recording...");var t=this.term.template.$canvas;this.stream=t.captureStream(30),B(this.stream,"Cannot get MediaStream of canvas"),B(MediaRecorder&&MediaRecorder.isTypeSupported(T.mimeType),"Does not support recording webm video"),this.recorder=new MediaRecorder(this.stream,T),this.recorder.ondataavailable=function(t){e.recording&&t.data&&0<t.data.size&&(e.blobs.push(t.data),e.term.emit("recording",{size:e.size,duration:e.duration}))},this.recorder.onstart=function(){e.term.emit("start")},this.recorder.onstop=function(){var t=URL.createObjectURL(new Blob(e.blobs));O(t,"".concat(Date.now(),".webm")),URL.revokeObjectURL(t),e.blobs=[],e.term.emit("end")},this.recorder.start(1e3)}},{key:"end",value:function(){this.term.emit("creating"),this.recorder.stop()}}]),e}(),st=function(){function t(i){var n=this;G(this,t),this.term=i,this.color="#66d9ef",this.radioTip="(select: Up or Down, confirm: Enter)",this.checkboxTip="(move: Up or Down, select: Space, confirm: Enter)",this.radioInit=!1,this.radioList=[],this.radioKey=null,this.radioResolve=function(){return null},this.checkboxInit=!1,this.checkboxList=[],this.checkboxIndex=0,this.checkboxKey=[],this.checkboxResolve=function(){return null},this.radio=function(t){return n.render(t,N)},this.checkbox=function(t){return n.render(t,_)},i.on("keydown",function(t){var e=i.drawer.lastCacheLog;e.style===N&&n.radioList===e.list&&n.radioEvent(t),e.style===_&&n.checkboxList===e.list&&n.checkboxEvent(t)})}return s(t,[{key:"render",value:function(e,i){var n=this;return new Promise(function(t){b(e,[{key:"string|number",text:"string|number"}]),B(e.length,"".concat(i," array cannot be empty")),B(e.map(function(t){return t.key}).every(function(t,e,i){return i.indexOf(t)===i.lastIndexOf(t)}),"The key value in the array element must be unique"),i===N&&(n.radioList=e,n.radioKey=e[0].key,n.radioResolve=t,n.radioRender(e,n.radioKey),n.radioInit=!0),i===_&&(n.checkboxList=e,n.checkboxIndex=0,n.checkboxKey=[],n.checkboxResolve=t,n.checkboxRender(),n.checkboxInit=!0)})}},{key:"radioRender",value:function(){var e=this,t=this.radioList.map(function(t){return e.radioKey===t.key?"<d color='".concat(e.color,"'>=> ").concat(t.text,"</d>"):"   ".concat(t.text)}).join("\n");this.term.drawer.emit({text:"".concat(t,"\n").concat(this.radioTip),list:this.radioList,type:S,style:N,replace:this.radioInit})}},{key:"radioEvent",value:function(t){var e=this,i=t.keyCode,n=this.radioList.findIndex(function(t){return t.key===e.radioKey});38===i&&(t.preventDefault(),this.radioKey=(n<=0?this.radioList[this.radioList.length-1]:this.radioList[n-1]).key,this.radioRender()),40===i&&(t.preventDefault(),n===this.radioList.length-1?this.radioKey=this.radioList[0].key:this.radioKey=this.radioList[n+1].key,this.radioRender()),13===i&&(this.radioResolve(this.radioKey),this.radioInit=!1,this.radioList=[],this.radioKey=null,this.radioResolve=function(){return null})}},{key:"checkboxRender",value:function(){var i=this,t=this.checkboxList.map(function(t,e){return e===i.checkboxIndex?"<d color='".concat(i.color,"'>").concat(i.checkboxKey.includes(t.key)?"◉":"〇"," ").concat(t.text,"</d>"):"".concat(i.checkboxKey.includes(t.key)?"◉":"〇"," ").concat(t.text)}).join("\n");this.term.drawer.emit({text:"".concat(t,"\n").concat(this.checkboxTip),list:this.checkboxList,type:S,style:_,replace:this.checkboxInit})}},{key:"checkboxEvent",value:function(t){var e,i=t.keyCode;38===i&&(t.preventDefault(),this.checkboxIndex<=0?this.checkboxIndex=this.checkboxList.length-1:--this.checkboxIndex,this.radioKey=this.checkboxList[this.checkboxIndex].key,this.checkboxRender()),40===i&&(t.preventDefault(),this.checkboxIndex===this.checkboxList.length-1?this.checkboxIndex=0:this.checkboxIndex+=1,this.checkboxRender()),32===i&&(e=this.checkboxList[this.checkboxIndex].key,-1<(t=this.checkboxKey.indexOf(e))?this.checkboxKey.splice(t,1):this.checkboxKey.push(e),this.checkboxRender()),13===i&&(this.checkboxResolve(this.checkboxKey),this.checkboxInit=!1,this.checkboxList=[],this.checkboxIndex=0,this.checkboxKey=[],this.checkboxResolve=function(){return null})}}]),t}();function ct(t,e){var r="-",o="|",s=" ";return t.output(function i(t,e){var n=1<arguments.length&&void 0!==e?e:0;return t.map(function(t){var e=t.child&&t.child.length;return(n?o:"")+"".concat(s.repeat(n?4*n-1:0)).concat(o+r.repeat(2)," ").concat(t.value)+(e?"\n".concat(i(t.child,n+1)):"")}).join("\n")}(e))}function at(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function ut(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?at(Object(i),!0).forEach(function(t){o(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):at(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function ht(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(i);return e=n?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),l(this,e)}}var lt=0,dt=[];return function(){u(n,y);var i=ht(n);function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return G(this,n),(e=i.call(this)).options=b(ut(ut({},n.default),t),n.scheme),e.isDestroy=!1,e.isFocus=!1,e.template=new Z(c(e)),e.events=new j(c(e)),e.drawer=new it(c(e)),e.commander=new rt(c(e)),e.inquirer=new st(c(e)),e.recorder=new ot(c(e)),e.ask=e.commander.ask,e.type=e.commander.type,e.input=e.commander.input,e.output=e.commander.output,e.clear=e.drawer.clear,e.radio=e.inquirer.radio,e.checkbox=e.inquirer.checkbox,e.tree=function(t){return ct(c(e),t)},lt+=1,e.id=lt,dt.push(c(e)),e}return s(n,[{key:"color",get:function(){return this.options.color},set:function(t){this.options.color=t,this.drawer.init()}},{key:"background",get:function(){return this.options.background},set:function(t){this.options.background=t,this.drawer.init()}},{key:"watermark",get:function(){return this.options.watermark},set:function(t){this.options.watermark=t,this.drawer.init()}},{key:"width",get:function(){return this.template.$container.clientWidth},set:function(t){this.emit("resize",{width:t,height:this.height})}},{key:"height",get:function(){return this.template.$container.clientHeight},set:function(t){this.emit("resize",{width:this.width,height:t})}},{key:"debug",get:function(){return this.options.debug},set:function(t){this.options.debug=t,this.drawer.init()}},{key:"destroy",value:function(){dt.splice(dt.indexOf(this),1),this.events.destroy(),this.template.destroy(),this.isDestroy=!0,this.emit("destroy")}}],[{key:"instances",get:function(){return dt}},{key:"version",get:function(){return"1.1.9"}},{key:"utils",get:function(){return U}},{key:"font",value:function(i,n){return new Promise(function(e,t){return window.FontFace?new FontFace(i,"url(".concat(n,")")).load().then(function(t){document.fonts.add(t),e(t)}):t(new Error("FontFace constructor is not supported"))})}},{key:"default",get:function(){return{container:"#term",debug:!1,width:600,height:500,actions:[],parseOpt:{},recorder:!0,draggable:!0,dragOpt:{},fontSize:13,watermark:"",autofocus:!1,fontFamily:"monospace",color:"#b0b2b6",title:"Term Web",prefix:'root@linux: ~ <d color="#00f501">$</d> ',welcome:"Last login: ".concat(new Date),loading:function(){return'<d color="yellow">Loading...</d>'},background:"rgb(42, 39, 52)",pixelRatio:window.devicePixelRatio,notFound:function(t){return"-bash: <d color='red'>".concat(t,"</d>: command not found")}}}},{key:"scheme",get:function(){return{container:"string|htmldivelement",debug:"boolean",width:"number",height:"number",actions:[{input:"string|regexp",output:"string|function"}],parseOpt:"object",recorder:"boolean",draggable:"boolean",dragOpt:"object",fontSize:"number",watermark:"string",autofocus:"boolean",fontFamily:"string",color:"string",title:"string",prefix:"string",welcome:"string",loading:"function",background:"string",pixelRatio:"number",notFound:"function"}}}]),n}()});
